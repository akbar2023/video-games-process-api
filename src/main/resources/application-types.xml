<?xml version='1.0' encoding='UTF-8'?>
<types:mule xmlns:types="http://www.mulesoft.org/schema/mule/types">
  <types:catalog>
    <types:type name="games" format="json">
      <types:shape format="weave" example="examples/filteredGames-1.json"><![CDATA[%dw 2.0

type games = Array<{|  genres: Array<String>, 
  stores: Array<String>, 
  name: String, 
  rating: Number {"typeId": "double"}, 
  top_rating: {|
    id: Number {"typeId": "int"}, 
    title: String, 
    count: Number {"typeId": "int"}, 
    percent: Number {"typeId": "double"}
  |}, 
  released: String, 
  platforms: Array<String>
|}> {"example": "[{\\\"genres\\\":[\\\"Action\\\",\\\"Adventure\\\"],\\\"stores\\\":[\\\"PlayStation Store\\\",\\\"Epic Games\\\",\\\"Steam\\\",\\\"Xbox 360 Store\\\",\\\"Xbox Store\\\"],\\\"name\\\":\\\"Grand Theft Auto V\\\",\\\"rating\\\":4.96,\\\"top_rating\\\":{\\\"id\\\":1,\\\"title\\\":\\\"Excellent\\\",\\\"count\\\":250,\\\"percent\\\":75.6},\\\"released\\\":\\\"2013-09-17\\\",\\\"platforms\\\":[\\\"PlayStation 5\\\",\\\"Xbox Series S\\/X\\\",\\\"PlayStation 4\\\",\\\"PC\\\",\\\"PlayStation 3\\\",\\\"Xbox 360\\\",\\\"Xbox One\\\"]}]"}

]]></types:shape>
    </types:type>
    <types:type name="filters" format="json">
      <types:shape format="weave" example="examples/filters.json"><![CDATA[%dw 2.0

type filters = {|
  released: String, 
  platforms: Array<String>, 
  genres: Array<String>, 
  stores: Array<String>
|} {"example": "{\\\"released\\\":\\\"2020-01-01\\\",\\\"platforms\\\":[\\\"Steam\\\",\\\"Playstore\\\"],\\\"genres\\\":[\\\"Steam\\\",\\\"Playstore\\\"],\\\"stores\\\":[\\\"Steam\\\",\\\"Playstore\\\"]}"}

]]></types:shape>
    </types:type>
    <types:type name="fullGames" format="json">
      <types:shape format="weave" example="examples/games-7.json"><![CDATA[%dw 2.0

type fullGames = {|
  count: Number {"typeId": "int"}, 
  next: String, 
  previous: String, 
  results: Array<{|    id: Number {"typeId": "int"},     slug: String,     name: String,     released: String,     tba: Boolean,     background_image: String,     rating: Number {"typeId": "double"},     rating_top: Number {"typeId": "int"},     ratings: Array<{|      id: Number {"typeId": "int"},       title: String,       count: Number {"typeId": "int"},       percent: Number {"typeId": "double"}    |}>, 
    ratings_count: Number {"typeId": "int"}, 
    reviews_text_count: Number {"typeId": "int"}, 
    added: Number {"typeId": "int"}, 
    added_by_status: {|
      yet: Number {"typeId": "int"}, 
      owned: Number {"typeId": "int"}, 
      beaten: Number {"typeId": "int"}, 
      toplay: Number {"typeId": "int"}, 
      dropped: Number {"typeId": "int"}, 
      playing: Number {"typeId": "int"}
    |}, 
    metacritic: Number {"typeId": "int"}, 
    playtime: Number {"typeId": "int"}, 
    suggestions_count: Number {"typeId": "int"}, 
    updated: String, 
    user_game: Null, 
    reviews_count: Number {"typeId": "int"}, 
    saturated_color: String, 
    dominant_color: String, 
    platforms: Array<{|      platform: {|        id: Number {"typeId": "int"},         name: String,         slug: String,         image: Null,         year_end: Null,         year_start: Number {"typeId": "int"},         games_count: Number {"typeId": "int"},         image_background: String      |},       released_at: String,       requirements_en: Null,       requirements_ru: Null    |}>, 
    parent_platforms: Array<{|      platform: {|        id: Number {"typeId": "int"},         name: String,         slug: String      |}    |}>, 
    genres: Array<{|      id: Number {"typeId": "int"},       name: String,       slug: String,       games_count: Number {"typeId": "int"},       image_background: String    |}>, 
    stores: Array<{|      id: Number {"typeId": "int"},       store: {|        id: Number {"typeId": "int"},         name: String,         slug: String,         domain: String,         games_count: Number {"typeId": "int"},         image_background: String      |}    |}>, 
    clip: Null, 
    tags: Array<{|      id: Number {"typeId": "int"},       name: String,       slug: String,       language: String,       games_count: Number {"typeId": "int"},       image_background: String    |}>, 
    esrb_rating: {|
      id: Number {"typeId": "int"}, 
      name: String, 
      slug: String
    |}, 
    short_screenshots: Array<{|      id: Number {"typeId": "int"},       image: String    |}>
  |}>, 
  seo_title: String, 
  seo_description: String, 
  seo_keywords: String, 
  seo_h1: String, 
  noindex: Boolean, 
  nofollow: Boolean, 
  description: String, 
  filters: {|
    years: Array<{|      from: Number {"typeId": "int"},       to: Number {"typeId": "int"},       filter: String,       decade: Number {"typeId": "int"},       years: Array<{|        year: Number {"typeId": "int"},         count: Number {"typeId": "int"},         nofollow: Boolean      |}>, 
      nofollow: Boolean, 
      count: Number {"typeId": "int"}
    |}>
  |}, 
  nofollow_collections: Array<String>
|} {"example": "{\\\"count\\\":884890,\\\"next\\\":\\\"https:\\/\\/api.rawg.io\\/api\\/games?key=9ddac8e309f447edbe487fdba9804537&page=3&page_size=1\\\",\\\"previous\\\":\\\"https:\\/\\/api.rawg.io\\/api\\/games?key=9ddac8e309f447edbe487fdba9804537&page_size=1\\\",\\\"results\\\":[{\\\"id\\\":3328,\\\"slug\\\":\\\"the-witcher-3-wild-hunt\\\",\\\"name\\\":\\\"The Witcher 3: Wild Hunt\\\",\\\"released\\\":\\\"2015-05-18\\\",\\\"tba\\\":false,\\\"background_image\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/618\\/618c2031a07bbff6b4f611f10b6bcdbc.jpg\\\",\\\"rating\\\":4.66,\\\"rating_top\\\":5,\\\"ratings\\\":[{\\\"id\\\":5,\\\"title\\\":\\\"exceptional\\\",\\\"count\\\":14643,\\\"percent\\\":77.6},{\\\"id\\\":4,\\\"title\\\":\\\"recommended\\\",\\\"count\\\":7643,\\\"percent\\\":77.6}],\\\"ratings_count\\\":5897,\\\"reviews_text_count\\\":59,\\\"added\\\":18183,\\\"added_by_status\\\":{\\\"yet\\\":1036,\\\"owned\\\":10475,\\\"beaten\\\":4300,\\\"toplay\\\":716,\\\"dropped\\\":819,\\\"playing\\\":837},\\\"metacritic\\\":92,\\\"playtime\\\":46,\\\"suggestions_count\\\":647,\\\"updated\\\":\\\"2023-03-16T08:39:49\\\",\\\"user_game\\\":null,\\\"reviews_count\\\":5983,\\\"saturated_color\\\":\\\"0f0f0f\\\",\\\"dominant_color\\\":\\\"0f0f0f\\\",\\\"platforms\\\":[{\\\"platform\\\":{\\\"id\\\":186,\\\"name\\\":\\\"Xbox Series S\\/X\\\",\\\"slug\\\":\\\"xbox-series-x\\\",\\\"image\\\":null,\\\"year_end\\\":null,\\\"year_start\\\":2020,\\\"games_count\\\":731,\\\"image_background\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/618\\/618c2031a07bbff6b4f611f10b6bcdbc.jpg\\\"},\\\"released_at\\\":\\\"2015-05-18\\\",\\\"requirements_en\\\":null,\\\"requirements_ru\\\":null}],\\\"parent_platforms\\\":[{\\\"platform\\\":{\\\"id\\\":1,\\\"name\\\":\\\"PC\\\",\\\"slug\\\":\\\"pc\\\"}}],\\\"genres\\\":[{\\\"id\\\":4,\\\"name\\\":\\\"Action\\\",\\\"slug\\\":\\\"action\\\",\\\"games_count\\\":177875,\\\"image_background\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/b8c\\/b8c243eaa0fbac8115e0cdccac3f91dc.jpg\\\"},{\\\"id\\\":2,\\\"name\\\":\\\"Adventure\\\",\\\"slug\\\":\\\"action\\\",\\\"games_count\\\":177875,\\\"image_background\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/b8c\\/b8c243eaa0fbac8115e0cdccac3f91dc.jpg\\\"}],\\\"stores\\\":[{\\\"id\\\":354780,\\\"store\\\":{\\\"id\\\":5,\\\"name\\\":\\\"GOG\\\",\\\"slug\\\":\\\"gog\\\",\\\"domain\\\":\\\"gog.com\\\",\\\"games_count\\\":4934,\\\"image_background\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/4cf\\/4cfc6b7f1850590a4634b08bfab308ab.jpg\\\"}}],\\\"clip\\\":null,\\\"tags\\\":[{\\\"id\\\":31,\\\"name\\\":\\\"Singleplayer\\\",\\\"slug\\\":\\\"singleplayer\\\",\\\"language\\\":\\\"eng\\\",\\\"games_count\\\":209582,\\\"image_background\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/73e\\/73eecb8909e0c39fb246f457b5d6cbbe.jpg\\\"}],\\\"esrb_rating\\\":{\\\"id\\\":4,\\\"name\\\":\\\"Mature\\\",\\\"slug\\\":\\\"mature\\\"},\\\"short_screenshots\\\":[{\\\"id\\\":-1,\\\"image\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/618\\/618c2031a07bbff6b4f611f10b6bcdbc.jpg\\\"}]},{\\\"id\\\":3328,\\\"slug\\\":\\\"the-witcher-3-wild-hunt\\\",\\\"name\\\":\\\"The Witcher 3: Wild Hunt\\\",\\\"released\\\":\\\"2015-05-18\\\",\\\"tba\\\":false,\\\"background_image\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/618\\/618c2031a07bbff6b4f611f10b6bcdbc.jpg\\\",\\\"rating\\\":4.66,\\\"rating_top\\\":5,\\\"ratings\\\":[{\\\"id\\\":5,\\\"title\\\":\\\"exceptional\\\",\\\"count\\\":4643,\\\"percent\\\":77.6},{\\\"id\\\":4,\\\"title\\\":\\\"recommended\\\",\\\"count\\\":7643,\\\"percent\\\":77.6}],\\\"ratings_count\\\":5897,\\\"reviews_text_count\\\":59,\\\"added\\\":18183,\\\"added_by_status\\\":{\\\"yet\\\":1036,\\\"owned\\\":10475,\\\"beaten\\\":4300,\\\"toplay\\\":716,\\\"dropped\\\":819,\\\"playing\\\":837},\\\"metacritic\\\":92,\\\"playtime\\\":46,\\\"suggestions_count\\\":647,\\\"updated\\\":\\\"2023-03-16T08:39:49\\\",\\\"user_game\\\":null,\\\"reviews_count\\\":5983,\\\"saturated_color\\\":\\\"0f0f0f\\\",\\\"dominant_color\\\":\\\"0f0f0f\\\",\\\"platforms\\\":[{\\\"platform\\\":{\\\"id\\\":186,\\\"name\\\":\\\"Xbox Series S\\/X\\\",\\\"slug\\\":\\\"xbox-series-x\\\",\\\"image\\\":null,\\\"year_end\\\":null,\\\"year_start\\\":2020,\\\"games_count\\\":731,\\\"image_background\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/618\\/618c2031a07bbff6b4f611f10b6bcdbc.jpg\\\"},\\\"released_at\\\":\\\"2015-05-18\\\",\\\"requirements_en\\\":null,\\\"requirements_ru\\\":null}],\\\"parent_platforms\\\":[{\\\"platform\\\":{\\\"id\\\":1,\\\"name\\\":\\\"PC\\\",\\\"slug\\\":\\\"pc\\\"}}],\\\"genres\\\":[{\\\"id\\\":4,\\\"name\\\":\\\"Action\\\",\\\"slug\\\":\\\"action\\\",\\\"games_count\\\":177875,\\\"image_background\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/b8c\\/b8c243eaa0fbac8115e0cdccac3f91dc.jpg\\\"}],\\\"stores\\\":[{\\\"id\\\":354780,\\\"store\\\":{\\\"id\\\":5,\\\"name\\\":\\\"GOG\\\",\\\"slug\\\":\\\"gog\\\",\\\"domain\\\":\\\"gog.com\\\",\\\"games_count\\\":4934,\\\"image_background\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/4cf\\/4cfc6b7f1850590a4634b08bfab308ab.jpg\\\"}}],\\\"clip\\\":null,\\\"tags\\\":[{\\\"id\\\":31,\\\"name\\\":\\\"Singleplayer\\\",\\\"slug\\\":\\\"singleplayer\\\",\\\"language\\\":\\\"eng\\\",\\\"games_count\\\":209582,\\\"image_background\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/73e\\/73eecb8909e0c39fb246f457b5d6cbbe.jpg\\\"}],\\\"esrb_rating\\\":{\\\"id\\\":4,\\\"name\\\":\\\"Mature\\\",\\\"slug\\\":\\\"mature\\\"},\\\"short_screenshots\\\":[{\\\"id\\\":-1,\\\"image\\\":\\\"https:\\/\\/media.rawg.io\\/media\\/games\\/618\\/618c2031a07bbff6b4f611f10b6bcdbc.jpg\\\"}]}],\\\"seo_title\\\":\\\"All Games\\\",\\\"seo_description\\\":\\\"\\\",\\\"seo_keywords\\\":\\\"\\\",\\\"seo_h1\\\":\\\"All Games\\\",\\\"noindex\\\":false,\\\"nofollow\\\":false,\\\"description\\\":\\\"\\\",\\\"filters\\\":{\\\"years\\\":[{\\\"from\\\":2020,\\\"to\\\":2023,\\\"filter\\\":\\\"2020-01-01,2023-12-31\\\",\\\"decade\\\":2020,\\\"years\\\":[{\\\"year\\\":2023,\\\"count\\\":36610,\\\"nofollow\\\":false}],\\\"nofollow\\\":true,\\\"count\\\":520824}]},\\\"nofollow_collections\\\":[\\\"stores\\\"]}"}

]]></types:shape>
    </types:type>
  </types:catalog>
  <types:enrichment select="#2c61f7e5-7621-4055-b9b3-e9faebbbb24a">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:payload type="fullGames"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="games"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#302f416f-0464-4963-9a72-508cce3ffc6a">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:payload type="games"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="games"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#9e84a47e-dba7-4df1-8507-a47de67542ba">
    <types:processor-declaration>
      <types:output-event>
        <types:message>
          <types:payload type="games"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
</types:mule>